<!DOCTYPE html>
<html lang="en">
  <head>
	  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Particle Brightness Estimator</title>
    <!-- Bootstrap -->
    <link href="css/bootstrap-4.4.1.css" rel="stylesheet">
	<link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32" />
	<link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16" />

	
	<!-- Chart library -->
	<script
	src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js">
	</script>


	<script src="PIV_MieScattering/ComplexNumber.js" type="text/javascript"></script>
	<script src="PIV_MieScattering/ComplexTrig.js" type="text/javascript"></script>
	<script src="PIV_MieScattering/bhmie.js" type="text/javascript"></script>	  
  
	<style type="text/css">
      
		td {
		   text-align: left;
		}
		body { background-color: #F8F8F8; } 
		
		table {
            border-collapse: collapse;
        }
    </style>
	  
	  
  </head>
  <body onload="init();">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <a class="navbar-brand" href="#">Menu</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="http:\\zigunov.com">Back to zigunov.com <span class="sr-only">(current)</span></a>
          </li>
		  <li class="nav-item active">
            <a class="nav-link" href="http:\\zigunov.com\?p=3411">Back to PIV post <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="index.html">Other Projects</a>
          </li>
          <li class="nav-item dropdown"> </li>
        </ul>
</div>
    </nav>
	  <div style="clear: left;"></div>    
		<div style="clear: left;"></div>
		<h2><b>How bright are my PIV particles?</b></h2>
        <h6>This little calculator allows an estimate of the brightness of small particles illuminated by laser light, as seen by a camera with a rated ISO.</h6>
        <h6>Values in <b>bold</b> are inputs.</h6>
	
	<br><br>
<table style="width:75%; margin-left: 10px;">
<tr><td style="width:50%">
<table>
  <tr style="border-top: 1px solid black; color: blue;">
    <td span=2><b>Camera Parameters</b> <td>
  </tr>  
  <tr>
    <td ><b>ISO Film Speed or EI (S)</b> <td><input type="text" id="ISO" name="ISO" value="1600" onchange="Recalculate()"></td>
  </tr>  
  <tr>
    <td>Exposure for 18% gray (H<sub>18</sub>) [lux-s] <td><input type="text" id="H18" name="H18" disabled="disabled"></td>
  </tr>
  <tr>
    <td>Exposure for 100% gray (H<sub>100</sub>) [lux-s] <td><input type="text" id="H100" name="H100" disabled="disabled"></td>
  </tr>
  <tr>
    <td><b>Wavelength (λ) [nm]</b> <td><input type="text" id="lambda" name="lambda" value="532" onchange="Recalculate()"></td>
  </tr>  
  <tr>
    <td>Photon energy [J] <td><input type="text" id="photonEnergy" name="photonEnergy" disabled="disabled"></td>
  </tr>
  <tr>
    <td>Photopic luminous efficiency V(λ) <td><input type="text" id="phEff" name="phEff" disabled="disabled"></td>
  </tr>
  <tr>
    <td><b>Pixel size [μm]</b> <td><input type="text" id="pixelsize" name="pixelsize" value="5.5" onchange="Recalculate()"></td>
  </tr>
  <tr>
    <td><b>Lens focal distance (f) [mm]</b> <td><input type="text" id="focaldist" name="focaldist" value="105" onchange="Recalculate()"></td>
  </tr>
  <tr>
    <td><b>Distance from particle to lens (i) [mm]</b> <td><input type="text" id="particledist" name="particledist" value="1000" onchange="Recalculate()"></td>
  </tr>
  <tr>
    <td><b>Lens f-number (N)</b> <td><input type="text" id="fnumber" name="fnumber" value="5.6" onchange="Recalculate()"></td>
  </tr>
  <tr>
    <td>Saturation exposure energy per pixel (h<sub>100,e</sub>) [J] <td><input type="text" id="H100e" name="H100e" disabled="disabled"></td>
  </tr>
  <tr>
    <td>Saturation exposure energy per pixel (h<sub>100,ph</sub>) [photons] <td><input type="text" id="H100ph" name="H100ph" disabled="disabled"></td>
  </tr> 
  <tr>
    <td><b>Gaussian particle image std. dev. [px]</b> <td><input type="text" id="fstd" name="fstd" value="1" onchange="Recalculate()"></td>
  </tr>
  <tr>
    <td><b>Camera view angle (0deg=looking at laser)</b> <td><input type="text" id="camAngle" name="camAngle" value="60" onchange="Recalculate()"></td>
  </tr>
  
  <tr style="border-top: 1px solid black; color: blue;">
    <td span=2><b>Illumination Parameters</b> <td>
  </tr>
  <tr>
    <td><b>Laser pulse energy (Q<sub>laser</sub>) [J]</b> <td><input type="text" id="Qlaser" name="Qlaser" value="0.2" onchange="Recalculate()"></td>
  </tr>
  <tr>
    <td><b>Laser pulse time (t) [ns]</b> <td><input type="text" id="time" name="time" value="20" onchange="Recalculate()"></td>
  </tr>
  <tr>
    <td><b>Laser beam width (w<sub>beam</sub>) [mm]</b> <td><input type="text" id="wbeam" name="wbeam" value="2" onchange="Recalculate()"></td>
  </tr>
  <tr>
    <td><b>Laser beam length (l<sub>beam</sub>) [mm]</b> <td><input type="text" id="lbeam" name="lbeam" value="20" onchange="Recalculate()"></td>
  </tr>
  <tr>
    <td>Laser irradiance (E<sub>laser</sub>) [W/m<sup>2</sup>] <td><input type="text" id="irradiance" name="irradiance" disabled="disabled"></td>
  </tr>
  <tr>
    <td><b>Particle Radius (r) [μm]</b> <td><input type="text" id="particleradius" name="particleradius" value="5" onchange="Recalculate()"></td>
  </tr>  
  <tr>
    <td><b>Particle IOR, real part (n<sub>Re</sub>)</b> <td><input type="text" id="IOR_Re" name="IOR_Re" value="1.333" onchange="Recalculate()"></td>
  </tr>  
  <tr>
    <td><b>Particle IOR, imaginary part (n<sub>Im</sub>)</b> <td><input type="text" id="IOR_Im" name="IOR_Im" value="0" onchange="Recalculate()"></td>
  </tr>  
  <tr>
    <td><b>Medium IOR (n<sub>medium, Re</sub>)</b> <td><input type="text" id="IOR_Medium" name="IOR_Medium" value="0" onchange="Recalculate()"></td>
  </tr> 
  <tr>
    <td>Radiant flux emitted by particle (Φ<sub>e</sub>) [W] <td><input type="text" id="radflux" name="radflux" disabled="disabled"></td>
  </tr>  
  <tr>
    <td>Photons/pixel at the camera, perp. [photons] <td><input type="text" id="photonsPerPixelPerp" name="photonsPerPixelPerp" disabled="disabled"></td>
  </tr>  
  <tr style="border-bottom: 1px solid black">
    <td>Photons/pixel at the camera, par. [photons] <td><input type="text" id="photonsPerPixelPar" name="photonsPerPixelPar" disabled="disabled"></td>
  </tr> 
    
</table>
</td>
<td style="width:50%">
<table>
<tr> <td>  <img src="PIV_MieScattering/Schematic Diagram.png" width="500 px" align="left">  </td> </tr>
<tr> <td>  <br>  </td> </tr>
<tr> <td> <canvas id="PixelPlot"  width="300 px" height="325 px" align="left" style="display:block;"></canvas> </td> </tr>
</table>
</td>
</tr>
</table>
<br>

	<canvas id="ScatteringPlot" style="max-width:1200px"></canvas>
	<script src="PIV_MieScattering/MainFunction.js" type="text/javascript"></script>	

	  <br><br><br>
    
    <div class="footer">
            Copyright © Fernando Zigunov 2023. All rights reserved.
    </div>
	<br><br>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="js/jquery-3.4.1.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap-4.4.1.js"></script>
  </body>
</html>